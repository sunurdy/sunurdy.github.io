---
layout:     post
title:      网易密码泄露，你害怕了吗？
category: blog
description: 科普
---​
##网易密码泄露，你害怕了吗？

这几天又爆出网易也被脱裤子了（脱库），海量数据被泄露，有些人开始心中有些小恐慌。

“咋整啊，我果照在里面呢？”“艾玛，傻逼了，我整天买吃的，订单被人看见，没脸见人了..”
问题严重吗？我钱不会丢吧？怎么办呢？别急，dream简单讲讲这是怎么回事。

dream不才，恰好干着些事关安全的工作。身边有很多黑客大神，称为白帽子，他们时刻守护着祖国的网络国土安全，还是很辛苦的，先掌声鼓励一下。
话不多说，网易数据泄露，最早报于乌云ID路人甲，此大神已经提交近1500枚漏洞，此次漏洞描述为“数据过亿交易证明数据/包含邮箱密码密保信息/登陆ip以及用户生日等，其中密码密保均为MD5存储，解开后测试大部分邮箱依旧还可登陆”，看着好像很恐怖。

其实也挺恐怖 -_-|||
已是司空见惯，这等事每时每刻都在上演，只是身在其外，不得而知罢了。只要是人写的程序，就会存在漏洞，系统就会被攻击，数据就有可能泄露。

说到这里，就有必要讲一下网站保存密码的原理：一般会将用户明文密码转为MD5保存，称为摘要算法、散列算法或哈希算法。它通过一个函数，把任意长度的数据转换为一个长度固定的数据串，密码就是这样被转码保存的。Python代码如下：

···
import hashlib
def get_md5(password):
	md5 = hashlib.md5()
	md5.update(password)
	print md5.hexdigest()
···

除非一些特别坑爹没有意识的小网站，没有人会明文保存密码。如果以明文保存用户口令，如果数据库泄露，所有用户的口令就落入黑客的手里。而摘要算法中的函数是一个单向函数，计算MD5很容易，但是通过MD5反推密码却很难，即便数据泄露，也不会轻易泄露密码。举例：
···
name    | password
--------+----------
john    | 123456
may     | abc999
···
实际中会存为：
···
username | password
---------+---------------------------------
john     | e10adc3949ba59abbe56e057f20f883e
may      | 878ef96e86145580c38c87f0410ad153
···

用户登录时，首先计算用户输入的明文口令的MD5，然后和数据库存储的MD5对比，如果一致，说明口令输入正确，如果不一致，口令肯定错误。
那这样的话，采用MD5存储口令是否一定安全呢？也不一定。假设你是黑客，已拿到存储MD5口令的数据库，如何通过MD5反推用户的明文口令呢？通过暴力破解？不，太费事费力。但是聪明的黑客想到，肯定有相当多小白用户会使用弱口令123456，888888，等等，于是提前计算出这些常用口令的MD5值，得到一个反推表：
···
'e10adc3949ba59abbe56e057f20f883e': '123456'
'878ef96e86145580c38c87f0410ad153': 'abc999'
'21218cca77804d2ba1922c33e0151105': '888888'
···

这样无需破解，主需要对比数据库的MD5，便可以找到使用这些口令的用户账户。这又是心理学在“破解密码”上的伟大贡献 o(╯□╰)o
所以对于用户来讲，一定不要使用弱口令。近年来会发现注册新网站账户时，如果输入的是弱口令，会提醒重新输入密码。甚至有些网站如苹果会要求必须有大写字母等额外条件。这些都是防止被脱裤后，黑客反推出弱口令。
巴特，单凭用户更改密码是不可靠的，总会有可能被穷举到。所以还需要网站设计人员想想其他的办法，如果是你，该会怎么办呢？有一种方法，在原始口令上再加一个复杂字符串来，俗称“加盐”，举例：
···
salt = 'the-key-hackers-do-not-know'
def register(username, password):
    db[username] = get_md5(password + salt)
···

经过加盐处理的MD5口令，只要Salt不被黑客知道，即使用户输入弱口令，也很难通过MD5反推明文口令。
再进一步，若数据库中有两条相同的MD5，代表两个用户密码相同，这时该如何处理呢？简单，如果用户名唯一，再把用户名加上：
···
def register(username, password):
    db[username] = get_md5(password + username + salt)
···

这样基本可以保证密码安全了。
但是如果黑客把整个网站都拿下了。。又拿到源代码。。一看，哦原来是这么处理密码的呀，然后。。。
但真实的情况是，我们应该庆幸，大网站有专职的网络安全人员，low b 黑客拿不到数据，牛逼的黑客倒也看不上你的数据，所以你还是算安全的。
毕竟身在互联网社会，没有密不透风的墙，不是没人黑你，是你不值得人家去黑！
好了，这次事件后有些人发帖危言耸听“弱智啊，用MD5存密码，分分钟破解啊”，还贴出了MD5解密网站，真相果真如此吗？相信大家也有自己的判断力。

网站我们是管不了的，那我们自身可以做些什么呢，恩？在最后跟大家分享一下自己的密码策略，不一定绝对安全，但是比什么都没有还是要稍微强上一丢丢。
自己的密码分为三个等级：
1.自身核心利益相关（网银密码、支付密码）
2.日常常用社交（通讯工具，常用邮箱，社交网站）
3.其他网站等

三个等级密码显然不同，越往上级的使用越少，更换越频繁。而且使用一些策略可以保证每个密码都不相同，还可以记得住。具体方法还请大家多想想，找到适合自己的密码策略。就酱。

=========分割线==========
课外阅读，MD5真的不可逆吗？其实是可破解的，但是理论价值和实际应用价值有相当的差距，请搜索王小云教授的研究成果，相信会有更加深入的认识。





